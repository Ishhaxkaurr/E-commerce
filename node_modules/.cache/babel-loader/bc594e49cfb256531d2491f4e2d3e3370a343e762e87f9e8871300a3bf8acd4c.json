{"ast":null,"code":"var _jsxFileName = \"/Users/ishapaul/Desktop/E-commerce/src/Pages/Login/Login.js\",\n  _s = $RefreshSig$();\nimport { useHistory } from 'react-router-dom';\nimport { useContext, useRef, useState } from 'react';\nimport classes from './Login.module.css';\nimport CartContext from '../../Store/cart-context';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Login = () => {\n  _s();\n  const [isLogin, setIsLogin] = useState(true);\n  const emailInputRef = useRef();\n  const passwordInputRef = useRef();\n  const authCtx = useContext(CartContext);\n  const history = useHistory();\n  const switchModeHandler = () => {\n    setIsLogin(prevState => !prevState);\n  };\n  const formSubmitHandler = async event => {\n    event.preventDefault();\n    const enteredEmail = emailInputRef.current.value;\n    const enteredPassword = passwordInputRef.current.value;\n    let url;\n    if (isLogin) {\n      url = 'https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyAoY0220tOm-UylBjD2RP1FpB-2dh0hy-8';\n    } else {\n      url = 'https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=AIzaSyAoY0220tOm-UylBjD2RP1FpB-2dh0hy-8';\n    }\n    await fetch(url, {\n      method: 'POST',\n      body: JSON.stringify({\n        email: enteredEmail,\n        password: enteredPassword,\n        returnSecureToken: true\n      }),\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    }).then(res => {\n      // console.log(res);\n      if (res.ok) {\n        return res.json();\n      } else {\n        return res.json().then(data => {\n          let errorMessage = \"Authenticatiion failed\";\n          throw new Error(errorMessage);\n        });\n      }\n    }).then(data => {\n      // console.log(data);\n      authCtx.login(data.idToken, enteredEmail);\n      history.replace('/store');\n    }).catch(err => {\n      alert(err.message);\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    className: classes['login-card'],\n    onSubmit: formSubmitHandler,\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      children: isLogin ? 'LOGIN' : 'SIGN UP'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes['login-email'],\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"email\",\n        children: \"E-mail\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 54\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"email\",\n        ref: emailInputRef,\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes['login-password'],\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"password\",\n        children: \"Password\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 59\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"password\",\n        ref: passwordInputRef,\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      children: isLogin ? 'Login' : 'Sign up'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        onClick: switchModeHandler,\n        style: {\n          cursor: 'pointer'\n        },\n        children: isLogin ? 'create new account?' : 'Already have account? Login'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 63,\n    columnNumber: 9\n  }, this);\n};\n_s(Login, \"lWrtJex9NyjXPHFBfai4fLRmhzo=\", false, function () {\n  return [useHistory];\n});\n_c = Login;\nexport default Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["useHistory","useContext","useRef","useState","classes","CartContext","jsxDEV","_jsxDEV","Login","_s","isLogin","setIsLogin","emailInputRef","passwordInputRef","authCtx","history","switchModeHandler","prevState","formSubmitHandler","event","preventDefault","enteredEmail","current","value","enteredPassword","url","fetch","method","body","JSON","stringify","email","password","returnSecureToken","headers","then","res","ok","json","data","errorMessage","Error","login","idToken","replace","catch","err","alert","message","className","onSubmit","children","fileName","_jsxFileName","lineNumber","columnNumber","htmlFor","type","ref","required","onClick","style","cursor","_c","$RefreshReg$"],"sources":["/Users/ishapaul/Desktop/E-commerce/src/Pages/Login/Login.js"],"sourcesContent":["\nimport { useHistory } from 'react-router-dom';\nimport { useContext, useRef, useState } from 'react';\n\nimport classes from './Login.module.css';\nimport CartContext from '../../Store/cart-context';\n\nconst Login = () => {\n    const [isLogin, setIsLogin] = useState(true);\n    const emailInputRef = useRef();\n    const passwordInputRef = useRef();\n    const authCtx = useContext(CartContext);\n    const history = useHistory();\n\n    const switchModeHandler = () => {\n        setIsLogin((prevState) => !prevState);\n    }\n\n    const formSubmitHandler = async (event) => {\n        event.preventDefault();\n\n        const enteredEmail = emailInputRef.current.value;\n        const enteredPassword = passwordInputRef.current.value;\n\n        let url;\n        if(isLogin){\n            url='https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyAoY0220tOm-UylBjD2RP1FpB-2dh0hy-8'\n        }else{\n            url='https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=AIzaSyAoY0220tOm-UylBjD2RP1FpB-2dh0hy-8'\n        }\n        await fetch(url, {\n            method: 'POST',\n            body: JSON.stringify({\n                email: enteredEmail,\n                password: enteredPassword,\n                returnSecureToken: true,\n            }),\n            headers: {\n                'Content-Type': 'application/json'\n            },\n        }).then((res) => {\n            // console.log(res);\n            if (res.ok) {\n                return res.json();\n            } else {\n                return res.json().then((data) => {\n                    let errorMessage = \"Authenticatiion failed\";\n                    throw new Error(errorMessage)\n                })\n            }\n        })\n            .then((data) => {\n                // console.log(data);\n                authCtx.login(data.idToken, enteredEmail);\n                history.replace('/store');\n            })\n            .catch((err) => {\n                alert(err.message);\n            })\n    }\n\n    return (\n        <form className={classes['login-card']} onSubmit={formSubmitHandler}>\n            <h3>{isLogin ? 'LOGIN' : 'SIGN UP'}</h3>\n            <div className={classes['login-email']}>\n                <label htmlFor=\"email\">E-mail</label><br />\n                <input type=\"email\" ref={emailInputRef} required />\n            </div>\n            <div className={classes['login-password']}>\n                <label htmlFor=\"password\">Password</label><br />\n                <input type=\"password\" ref={passwordInputRef} required />\n            </div>\n            <button >{isLogin ? 'Login' : 'Sign up'}</button>\n            <div>\n                <p onClick={switchModeHandler} style={{cursor: 'pointer'}} >\n                    {isLogin ? 'create new account?' : 'Already have account? Login'}\n                </p>\n            </div>\n        </form>\n    )\n}\n\nexport default Login;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
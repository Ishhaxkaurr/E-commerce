{"ast":null,"code":"var _jsxFileName = \"/Users/ishapaul/Desktop/E-commerce/src/Store/CartProvider.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport CartContext from \"./cart-context\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CartProvider = props => {\n  _s();\n  const [items, updateItems] = useState([]);\n  const initialToken = localStorage.getItem(\"token\");\n  const [token, setToken] = useState(initialToken);\n  const userIsLoggedIn = !!token;\n  const addItemToCartHandler = item => {\n    let itemsCopy = [...items];\n    let itemIndex = itemsCopy.findIndex(i => i.id === item.id);\n    if (itemIndex === -1) {\n      updateItems([...items, item]);\n    } else {\n      itemsCopy[itemIndex].quantity = Number(itemsCopy[itemIndex].quantity) + Number(item.quantity);\n      itemsCopy[itemIndex].totalPrice = itemsCopy[itemIndex].quantity * itemsCopy[itemIndex].price;\n      updateItems(itemsCopy);\n      console.log(\"inside addItemToCartHandler\", cartContext);\n    }\n  };\n  let totalPrice = 0;\n  items.forEach(item => {\n    totalPrice = totalPrice + Number(item.price * item.quantity);\n  });\n  const removeItemFromCartHandler = item => {\n    const itemsCopy = [...items];\n    const idx = itemsCopy.findIndex(i => i.id === item.id);\n    if (idx !== -1 && itemsCopy[idx].quantity < 2) {\n      itemsCopy.splice(idx, 1);\n      updateItems(itemsCopy);\n    } else {\n      itemsCopy[idx].quantity--;\n      updateItems(itemsCopy);\n    }\n  };\n  const loginHandler = token => {\n    setToken(token);\n    localStorage.setItem(\"token\", token);\n  };\n  const logoutHandler = () => {\n    setToken(null);\n    localStorage.removeItem(\"token\");\n  };\n  const cartContext = {\n    items: items,\n    totalAmount: totalPrice.toFixed(2),\n    addItem: addItemToCartHandler,\n    removeItem: removeItemFromCartHandler,\n    token: token,\n    isLoggedIn: userIsLoggedIn,\n    login: loginHandler,\n    logout: logoutHandler\n  };\n  return /*#__PURE__*/_jsxDEV(CartContext.Provider, {\n    value: cartContext,\n    children: [console.log(\"inside CartContext.Provider\", cartContext), props.children]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 65,\n    columnNumber: 5\n  }, this);\n};\n_s(CartProvider, \"1mpF3U3317U5aJwyQVpU1l2w540=\");\n_c = CartProvider;\nexport default CartProvider;\nvar _c;\n$RefreshReg$(_c, \"CartProvider\");","map":{"version":3,"names":["React","useState","CartContext","jsxDEV","_jsxDEV","CartProvider","props","_s","items","updateItems","initialToken","localStorage","getItem","token","setToken","userIsLoggedIn","addItemToCartHandler","item","itemsCopy","itemIndex","findIndex","i","id","quantity","Number","totalPrice","price","console","log","cartContext","forEach","removeItemFromCartHandler","idx","splice","loginHandler","setItem","logoutHandler","removeItem","totalAmount","toFixed","addItem","isLoggedIn","login","logout","Provider","value","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/ishapaul/Desktop/E-commerce/src/Store/CartProvider.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport CartContext from \"./cart-context\";\n\nconst CartProvider = (props) => {\n  const [items, updateItems] = useState([]);\n  const initialToken = localStorage.getItem(\"token\");\n  const [token, setToken] = useState(initialToken);\n  const userIsLoggedIn = !!token;\n\n  const addItemToCartHandler = (item) => {\n    let itemsCopy = [...items];\n    let itemIndex = itemsCopy.findIndex((i) => i.id === item.id);\n    if (itemIndex === -1) {\n      updateItems([...items, item]);\n    } else {\n      itemsCopy[itemIndex].quantity =\n        Number(itemsCopy[itemIndex].quantity) + Number(item.quantity);\n      itemsCopy[itemIndex].totalPrice =\n        itemsCopy[itemIndex].quantity * itemsCopy[itemIndex].price;\n      updateItems(itemsCopy);\n\n      console.log(\"inside addItemToCartHandler\", cartContext);\n    }\n  };\n\n  let totalPrice = 0;\n  items.forEach((item) => {\n    totalPrice = totalPrice + Number(item.price * item.quantity);\n  });\n\n  const removeItemFromCartHandler = (item) => {\n    const itemsCopy = [...items];\n    const idx = itemsCopy.findIndex((i) => i.id === item.id);\n\n    if (idx !== -1 && itemsCopy[idx].quantity < 2) {\n      itemsCopy.splice(idx, 1);\n      updateItems(itemsCopy);\n    } else {\n      itemsCopy[idx].quantity--;\n      updateItems(itemsCopy);\n    }\n  };\n\n  const loginHandler = (token) => {\n    setToken(token);\n    localStorage.setItem(\"token\", token);\n  };\n\n  const logoutHandler = () => {\n    setToken(null);\n    localStorage.removeItem(\"token\");\n  };\n  const cartContext = {\n    items: items,\n    totalAmount: totalPrice.toFixed(2),\n    addItem: addItemToCartHandler,\n    removeItem: removeItemFromCartHandler,\n    token: token,\n    isLoggedIn: userIsLoggedIn,\n    login: loginHandler,\n    logout: logoutHandler,\n  };\n\n  return (\n    <CartContext.Provider value={cartContext}>\n      {console.log(\"inside CartContext.Provider\", cartContext)}\n      {props.children}\n    </CartContext.Provider>\n  );\n};\nexport default CartProvider;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
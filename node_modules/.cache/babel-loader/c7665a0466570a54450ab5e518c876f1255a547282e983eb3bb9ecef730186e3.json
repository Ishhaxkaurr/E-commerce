{"ast":null,"code":"var _jsxFileName = \"/Users/ishapaul/Desktop/E-commerce/src/Pages/Login/Login.js\",\n  _s = $RefreshSig$();\nimport { useState, useRef, useContext } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport classes from \"./Login.module.css\";\nimport CartContext from \"../../Store/cart-context\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Login = () => {\n  _s();\n  const history = useHistory();\n  const emailInputRef = useRef(\"\");\n  const passwordInputRef = useRef(\"\");\n  const [isLogin, setIsLogin] = useState(true);\n  const authCtx = useContext(CartContext);\n  const switchAuthModeHandler = () => {\n    setIsLogin(prevState => !prevState);\n  };\n  async function submitHandler(event) {\n    event.preventDefault();\n    const enteredEmail = emailInputRef.current.value;\n    const enteredPassword = passwordInputRef.current.value;\n    let url;\n    if (isLogin) {\n      url = \"https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyAoY0220tOm-UylBjD2RP1FpB-2dh0hy-8\";\n    } else {\n      url = \"https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=AIzaSyAoY0220tOm-UylBjD2RP1FpB-2dh0hy-8\";\n    }\n    await fetch(url, {\n      method: \"POST\",\n      body: JSON.stringify({\n        email: enteredEmail,\n        password: enteredPassword,\n        returnSecureToken: true\n      }),\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    }).then(res => {\n      if (res.ok) {\n        return res.json();\n      } else {\n        return res.json().then(data => {\n          let errorMessage = \"Authenticatiion failed\";\n          throw new Error(errorMessage);\n        });\n      }\n    }).then(data => {\n      authCtx.login(data.idToken, enteredEmail);\n      history.replace(\"/store\");\n    }).catch(err => {\n      alert(err.message);\n    });\n  }\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    className: classes.auth,\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: isLogin ? \"Login\" : \"Sign Up\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: submitHandler,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.control,\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"email\",\n          children: \"Your Email\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"email\",\n          id: \"email\",\n          ref: emailInputRef,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.control,\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"password\",\n          children: \"Your Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          id: \"password\",\n          ref: passwordInputRef,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.actions,\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          children: isLogin ? \"Login\" : \"Create Account\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          onClick: switchAuthModeHandler,\n          children: isLogin ? \"Create new account\" : \"Login with existing account\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 5\n  }, this);\n};\n_s(Login, \"VO+gbcD8x+S92EWgEQeaoN0v7A0=\", false, function () {\n  return [useHistory];\n});\n_c = Login;\nexport default Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["useState","useRef","useContext","useHistory","classes","CartContext","jsxDEV","_jsxDEV","Login","_s","history","emailInputRef","passwordInputRef","isLogin","setIsLogin","authCtx","switchAuthModeHandler","prevState","submitHandler","event","preventDefault","enteredEmail","current","value","enteredPassword","url","fetch","method","body","JSON","stringify","email","password","returnSecureToken","headers","then","res","ok","json","data","errorMessage","Error","login","idToken","replace","catch","err","alert","message","className","auth","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","control","htmlFor","type","id","ref","required","actions","onClick","_c","$RefreshReg$"],"sources":["/Users/ishapaul/Desktop/E-commerce/src/Pages/Login/Login.js"],"sourcesContent":["import { useState, useRef, useContext } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport classes from \"./Login.module.css\";\nimport CartContext from \"../../Store/cart-context\";\n\nconst Login = () => {\n  const history = useHistory();\n  const emailInputRef = useRef(\"\");\n  const passwordInputRef = useRef(\"\");\n  const [isLogin, setIsLogin] = useState(true);\n\n  const authCtx = useContext(CartContext);\n  const switchAuthModeHandler = () => {\n    setIsLogin((prevState) => !prevState);\n  };\n  async function submitHandler(event) {\n    event.preventDefault();\n    const enteredEmail = emailInputRef.current.value;\n    const enteredPassword = passwordInputRef.current.value;\n    let url;\n\n    if (isLogin) {\n      url =\n        \"https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyAoY0220tOm-UylBjD2RP1FpB-2dh0hy-8\";\n    } else {\n      url =\n        \"https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=AIzaSyAoY0220tOm-UylBjD2RP1FpB-2dh0hy-8\";\n    }\n\n    await fetch(url, {\n      method: \"POST\",\n      body: JSON.stringify({\n        email: enteredEmail,\n        password: enteredPassword,\n        returnSecureToken: true,\n      }),\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n    })\n      .then((res) => {\n        if (res.ok) {\n          return res.json();\n        } else {\n          return res.json().then((data) => {\n            let errorMessage = \"Authenticatiion failed\";\n            throw new Error(errorMessage);\n          });\n        }\n      })\n      .then((data) => {\n        authCtx.login(data.idToken, enteredEmail);\n        history.replace(\"/store\");\n      })\n      .catch((err) => {\n        alert(err.message);\n      });\n  }\n\n  return (\n    <section className={classes.auth}>\n      <h1>{isLogin ? \"Login\" : \"Sign Up\"}</h1>\n      <form onSubmit={submitHandler}>\n        <div className={classes.control}>\n          <label htmlFor=\"email\">Your Email</label>\n          <input type=\"email\" id=\"email\" ref={emailInputRef} required />\n        </div>\n        <div className={classes.control}>\n          <label htmlFor=\"password\">Your Password</label>\n          <input\n            type=\"password\"\n            id=\"password\"\n            ref={passwordInputRef}\n            required\n          />\n        </div>\n        <div className={classes.actions}>\n          <button>{isLogin ? \"Login\" : \"Create Account\"}</button>\n          <p onClick={switchAuthModeHandler}>\n            {isLogin ? \"Create new account\" : \"Login with existing account\"}\n          </p>\n        </div>\n      </form>\n    </section>\n  );\n};\n\nexport default Login;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}